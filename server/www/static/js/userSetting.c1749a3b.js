(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userSetting"],{"0bfb":function(e,t,r){"use strict";var n=r("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"214f":function(e,t,r){"use strict";r("b0c5");var n=r("2aba"),o=r("32e9"),a=r("79e5"),i=r("be13"),s=r("2b4c"),u=r("520a"),l=s("species"),c=!a(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var d=s(e),h=!a(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),p=h?!a(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[l]=function(){return r}),r[d](""),!t}):void 0;if(!h||!p||"replace"===e&&!c||"split"===e&&!f){var y=/./[d],b=r(i,d,""[e],function(e,t,r,n,o){return t.exec===u?h&&!o?{done:!0,value:y.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),m=b[0],g=b[1];n(String.prototype,e,m),o(RegExp.prototype,d,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},"386d":function(e,t,r){"use strict";var n=r("cb7c"),o=r("83a1"),a=r("5f1b");r("214f")("search",1,function(e,t,r,i){return[function(r){var n=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=i(r,e,this);if(t.done)return t.value;var s=n(e),u=String(this),l=s.lastIndex;o(l,0)||(s.lastIndex=0);var c=a(s,u);return o(s.lastIndex,l)||(s.lastIndex=l),null===c?-1:c.index}]})},"456d":function(e,t,r){var n=r("4bf8"),o=r("0d58");r("5eda")("keys",function(){return function(e){return o(n(e))}})},"520a":function(e,t,r){"use strict";var n=r("0bfb"),o=RegExp.prototype.exec,a=String.prototype.replace,i=o,s="lastIndex",u=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[s]||0!==t[s]}(),l=void 0!==/()??/.exec("")[1],c=u||l;c&&(i=function(e){var t,r,i,c,f=this;return l&&(r=new RegExp("^"+f.source+"$(?!\\s)",n.call(f))),u&&(t=f[s]),i=o.call(f,e),u&&i&&(f[s]=f.global?i.index+i[0].length:t),l&&i&&i.length>1&&a.call(i[0],r,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(i[c]=void 0)}),i}),e.exports=i},"5eda":function(e,t,r){var n=r("5ca1"),o=r("8378"),a=r("79e5");e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",i)}},"5f1b":function(e,t,r){"use strict";var n=r("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var a=r.call(e,t);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},ac6a:function(e,t,r){for(var n=r("cadf"),o=r("0d58"),a=r("2aba"),i=r("7726"),s=r("32e9"),u=r("84f2"),l=r("2b4c"),c=l("iterator"),f=l("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=o(h),y=0;y<p.length;y++){var b,m=p[y],g=h[m],v=i[m],w=v&&v.prototype;if(w&&(w[c]||s(w,c,d),w[f]||s(w,f,m),u[m]=d,g))for(b in n)w[b]||a(w,b,n[b],!0)}},b0c5:function(e,t,r){"use strict";var n=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},bded:function(e,t,r){},dab4:function(e,t,r){"use strict";r("386d"),r("456d"),r("ac6a");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function s(e){return e&&DataView.prototype.isPrototypeOf(e)}if(i.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!==typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function y(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function b(e){var t=new FileReader,r=y(t);return t.readAsArrayBuffer(e),r}function m(e){var t=new FileReader,r=y(t);return t.readAsText(e),r}function g(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i.arrayBuffer&&i.blob&&s(e)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return m(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(g(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=c(e),t=f(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype["delete"]=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=f(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),d(e)},h.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),d(e)},h.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),d(e)},i.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function I(e){var t=e.toUpperCase();return x.indexOf(t)>-1?t:e}function E(e,t){t=t||{};var r=t.body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=I(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function T(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function S(e){var t=new h,r=e.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t}function A(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},w.call(E.prototype),w.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},A.error=function(){var e=new A(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];A.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new A(null,{status:t,headers:{location:e}})};var O=self.DOMException;try{new O}catch(B){O=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},O.prototype=Object.create(Error.prototype),O.prototype.constructor=O}function L(e,t){return new Promise(function(r,n){var o=new E(e,t);if(o.signal&&o.signal.aborted)return n(new O("Aborted","AbortError"));var a=new XMLHttpRequest;function s(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:S(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;r(new A(t,e))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.onabort=function(){n(new O("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",s),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",s)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})}L.polyfill=!0,self.fetch||(self.fetch=L,self.Headers=h,self.Request=E,self.Response=A),r.d(t,"a",function(){return P});var P=function(){function e(){n(this,e),this.protocol=location.protocol,this.host=location.host,this.prefix="".concat(this.protocol,"//").concat(this.host)}return a(e,[{key:"GET",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){var r=[];Object.keys(t).forEach(function(e){return r.push(e+"="+t[e])}),-1===e.search(/\?/)?e+="?"+r.join("&"):e+="&"+r.join("&")}var n=this.prefix+e;return L(n,{method:"GET",credentials:"include"}).then(function(e){if(e.ok)return e.json();throw new Error("出现了网络问题!")})}},{key:"POST",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.prefix+e;return L(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}).then(function(e){if(e.ok)return e.json();throw new Error("出现了网络问题!")})}},{key:"UPLOAD",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.prefix+e,a=new FormData;return a.append(r,t),Object.keys(n).length>0&&Object.keys(n).forEach(function(e){a.append(e,n[e])}),L(o,{method:"POST",body:a}).then(function(e){if(e.ok)return e.json();throw new Error("出现了网络问题!")})}}]),e}()},dfc5:function(e,t,r){"use strict";var n=r("bded"),o=r.n(n);o.a},e09a:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"userInfo",staticClass:"userInfo",attrs:{model:e.userInfo,rules:e.userInfoRules,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.origin+"/api/uploadImage","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.userInfo.avatar?r("img",{staticClass:"avatar",attrs:{src:e.userInfo.avatar}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-radio",{attrs:{label:1},model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[e._v("男")]),r("el-radio",{attrs:{label:2},model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[e._v("女")])],1),r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.userInfo.birthday,callback:function(t){e.$set(e.userInfo,"birthday",t)},expression:"userInfo.birthday"}})],1),r("el-form-item",{attrs:{label:"学号",prop:"sid"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.userInfo.sid,callback:function(t){e.$set(e.userInfo,"sid",t)},expression:"userInfo.sid"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),r("el-form-item",{attrs:{label:"邮箱提醒",prop:"reminder"}},[r("el-radio",{attrs:{label:1},model:{value:e.userInfo.reminder,callback:function(t){e.$set(e.userInfo,"reminder",t)},expression:"userInfo.reminder"}},[e._v("提醒")]),r("el-radio",{attrs:{label:0},model:{value:e.userInfo.reminder,callback:function(t){e.$set(e.userInfo,"reminder",t)},expression:"userInfo.reminder"}},[e._v("不提醒")])],1),r("el-form-item",{attrs:{label:"手机",prop:"phone"}},[r("el-input",{model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("userInfo")}}},[e._v("提交修改")])],1)],1)],1)},o=[],a=r("dab4"),i={data:function(){return{userInfo:{avatar:"",name:"",gender:1,birthday:"",sid:"",email:"",phone:"",reminder:1,origin:window.location.origin},userInfoRules:{avatar:[{required:!0,message:"请选择图片",trigger:"change"}],name:[{required:!0,message:"请输入用户名",trigger:"change"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"change"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],birthday:[{required:!0,message:"点击选择日期",trigger:"change"}],reminder:[{required:!0,message:"请选择是否提醒",trigger:"change"}],phone:[{required:!0,message:"请输入手机号",trigger:"change"}]}}},mounted:function(){localStorage.getItem("userInfo")&&(this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.userInfo.gender=this.userInfo.sex)},created:function(){this.origin=window.location.origin},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({showClose:!0,message:"提交失败,提交信息错误!",type:"error"}),!1;var r=new a["a"];r.POST("/api/user/setting",t.userInfo).then(function(e){0===e.errno?(localStorage.setItem("userInfo",JSON.stringify(e.data)),t.$message({showClose:!0,message:"修改成功",type:"success"}),t.userInfo=e.data,t.userInfo.gender=t.userInfo.sex,t.$router.go(0)):t.$message({showClose:!0,message:e.errmsg,type:"error"})}).catch(function(e){t.$message({showClose:!0,message:"注册失败,服务器错误,请稍后重试!"+e,type:"error"})})})},handleAvatarSuccess:function(e,t){this.userInfo.avatar=e.data.filepath},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,r=e.size/1024/1024<1;return t||this.$message.error("上传头像图片只能是 JPG 和 PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 1MB!"),t&&r}}},s=i,u=(r("dfc5"),r("2877")),l=Object(u["a"])(s,n,o,!1,null,"77724316",null);l.options.__file="setting.vue";t["default"]=l.exports}}]);
//# sourceMappingURL=userSetting.c1749a3b.js.map